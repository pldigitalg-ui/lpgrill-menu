<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>LP Grill - Card√°pio & Pedido</title>

  <style>
    :root{
      --bg:#0b0b0b;
      --panel:#141414;
      --panel2:#101010;
      --text:#ffffff;
      --muted:#bdbdbd;
      --red:#ff1e1e;
      --line:#242424;
      --good:#25d366;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:var(--bg);
      color:var(--text);
    }
    a{color:inherit}

    /* HEADER */
    header{
      position:relative;
      background:#000;
      border-bottom:2px solid var(--red);
      overflow:hidden;
    }
    .hero{
      position:relative;
      padding:22px 18px 18px;
      display:flex;
      gap:16px;
      align-items:center;
      justify-content:space-between;
      max-width:1100px;
      margin:0 auto;
    }
    .hero::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        linear-gradient(90deg, rgba(0,0,0,.92), rgba(0,0,0,.65)),
        url("mockup.png");
      background-size:cover;
      background-position:center;
      transform:scale(1.02);
      z-index:0;
    }
    .hero > *{position:relative; z-index:1;}
    .brand{
      display:flex;
      align-items:center;
      gap:14px;
      min-width:260px;
    }
    .brand img{
      height:54px;
      width:auto;
      border-radius:10px;
      box-shadow: var(--shadow);
      background:#000;
      padding:6px;
    }
    .brand .title{line-height:1.1}
    .brand .title h1{
      margin:0;
      font-size:18px;
      letter-spacing:.5px;
      color:#fff;
    }
    .brand .title p{
      margin:4px 0 0;
      font-size:13px;
      color:var(--muted);
    }
    .hero-right{
      text-align:right;
      max-width:520px;
    }
    .hero-right .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border:1px solid rgba(255,255,255,.12);
      border-radius:999px;
      background:rgba(0,0,0,.35);
      font-size:12px;
      color:#eaeaea;
    }
    .hero-right .sub{
      margin:10px 0 0;
      color:#d6d6d6;
      font-size:13px;
      line-height:1.35;
    }

    /* NAV */
    nav{
      background: #0f0f0f;
      border-top:1px solid rgba(255,255,255,.06);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .nav-inner{
      max-width:1100px;
      margin:0 auto;
      padding:10px 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .chip{
      text-decoration:none;
      padding:9px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      color:#fff;
      font-weight:800;
      font-size:13px;
      transition:.2s;
    }
    .chip:hover{background:rgba(255,30,30,.15); border-color:rgba(255,30,30,.55)}
    .chip.red{background:rgba(255,30,30,.18); border-color:rgba(255,30,30,.65)}

    /* LAYOUT */
    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:18px 14px 110px;
      display:grid;
      grid-template-columns: 1.25fr .85fr;
      gap:16px;
    }
    @media (max-width: 980px){
      .wrap{grid-template-columns:1fr}
      .hero{flex-direction:column; align-items:flex-start}
      .hero-right{text-align:left; max-width:unset; width:100%}
    }

    .card{
      background:linear-gradient(180deg, var(--panel), var(--panel2));
      border:1px solid rgba(255,255,255,.08);
      border-radius:var(--radius);
      padding:16px;
      box-shadow: var(--shadow);
    }
    .card h2{
      margin:0 0 10px;
      font-size:16px;
      color:var(--red);
      letter-spacing:.2px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .muted{color:var(--muted); font-size:13px; line-height:1.35}
    .hr{height:1px; background:var(--line); margin:14px 0}

    /* Sections */
    .sectionTitle{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      margin-bottom:10px;
    }
    .sectionTitle h3{
      margin:0;
      font-size:14px;
      color:#fff;
      letter-spacing:.2px;
    }
    .tag{
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.25);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
    }

    /* Quantity */
    .qtyRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(255,255,255,.03);
    }
    .qtyRow .left{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .qtyRow .left .name{
      font-weight:900;
      font-size:14px;
    }
    .qtyRow .left .desc{
      font-size:12px;
      color:var(--muted);
      line-height:1.25;
    }
    .qtyRow .right{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .qtyBtn{
      width:44px;
      height:44px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(0,0,0,.25);
      color:#fff;
      font-weight:900;
      font-size:18px;
      cursor:pointer;
      transition:.2s;
    }
    .qtyBtn:hover{border-color:rgba(255,30,30,.55); background:rgba(255,30,30,.10)}
    .qtyNum{
      min-width:36px;
      text-align:center;
      font-weight:900;
      font-size:16px;
    }

    /* Checklist as big buttons */
    .checklist{display:grid; gap:10px}
    .pick{
      padding:12px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
      cursor:pointer;
      transition:.2s;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      user-select:none;
    }
    .pick:hover{border-color:rgba(255,30,30,.55); background:rgba(255,30,30,.08)}
    .pick.active{
      border-color:rgba(255,30,30,.95);
      background:rgba(255,30,30,.12);
      box-shadow: 0 10px 24px rgba(255,30,30,.08);
    }
    .pick .name{
      font-weight:900;
      font-size:13px;
    }
    .pick .meta{
      color:var(--muted);
      font-weight:900;
      font-size:12px;
      white-space:nowrap;
    }

    /* Meats with stepper */
    .addRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(255,255,255,.03);
    }
    .addRow .info{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .addRow .info .name{font-weight:900}
    .addRow .info .price{color:var(--muted); font-size:12px; font-weight:800}
    .addRow .step{
      display:flex;
      align-items:center;
      gap:10px;
    }

    /* FORM */
    .field{display:grid; gap:6px; margin:10px 0}
    .field label{font-size:12px; color:#dcdcdc; font-weight:900}
    .field input, .field textarea, .field select{
      width:100%;
      padding:11px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.25);
      color:#fff;
      outline:none;
    }
    .field textarea{min-height:90px; resize:vertical}
    .hint{
      font-size:12px;
      color:var(--muted);
      margin-top:6px;
      line-height:1.35;
    }

    /* SUMMARY */
    .summary{
      position:sticky;
      top:14px;
      display:grid;
      gap:12px;
    }
    .totalBox{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,30,30,.35);
      background:rgba(255,30,30,.10);
    }
    .totalBox .t1{font-weight:900; color:#fff}
    .totalBox .t2{font-weight:900; font-size:20px; color:#fff}

    .lineItem{
      display:flex;
      justify-content:space-between;
      gap:10px;
      padding:10px 0;
      border-bottom:1px solid rgba(255,255,255,.06);
      font-size:13px;
    }
    .lineItem:last-child{border-bottom:none}
    .lineItem .l{color:#eaeaea; font-weight:800}
    .lineItem .r{color:#eaeaea; font-weight:900}

    .miniBox{
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.22);
    }
    .miniBox h4{
      margin:0 0 10px;
      font-size:13px;
      color:#fff;
      letter-spacing:.2px;
    }
    .miniList{
      margin:0;
      padding-left:18px;
      color:#dcdcdc;
      font-size:13px;
      line-height:1.35;
    }

    .btn{
      width:100%;
      border:none;
      padding:14px 16px;
      border-radius:14px;
      font-weight:900;
      cursor:pointer;
      transition:.2s;
    }
    .btn-wa{
      background: var(--good);
      color:#062b14;
      box-shadow: 0 14px 30px rgba(37, 211, 102, .18);
    }
    .btn-wa:hover{filter:brightness(1.05)}
    .btn-ghost{
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color:#fff;
    }
    .btn-ghost:hover{border-color:rgba(255,30,30,.55); background:rgba(255,30,30,.10)}

    .warn{
      padding:10px 12px;
      border-radius:12px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.25);
      color:#eaeaea;
      font-size:12px;
      line-height:1.35;
    }

    /* Floating */
    .wa-float{
      position:fixed;
      right:18px;
      bottom:18px;
      z-index:50;
      text-decoration:none;
      background:var(--good);
      color:#062b14;
      padding:13px 18px;
      border-radius:999px;
      font-weight:900;
      box-shadow: 0 14px 30px rgba(37, 211, 102, .22);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .wa-float small{font-weight:800; opacity:.85}
  </style>
</head>

<body>

<header>
  <div class="hero">
    <div class="brand">
      <img src="LOGO.PNG" alt="LP Grill Logo">
      <div class="title">
        <h1>LP GRILL</h1>
        <p>Card√°pio & Pedido pelo WhatsApp</p>
      </div>
    </div>

    <div class="hero-right">
      <div class="badge">‚è± Prazo m√©dio: <b>30 minutos</b> ‚Ä¢ üöö Entrega fixa: <b>R$ 5,00</b></div>
      <div class="sub">
        Escolha quantas marmitas deseja (Dia / Cl√°ssico / Montado).  
        Marmitex pronto: <b>R$ 18</b> ‚Ä¢ Montado: <b>R$ 21</b> ‚Ä¢ Adicional de carne: <b>+R$ 4</b>
      </div>
    </div>
  </div>
</header>

<nav>
  <div class="nav-inner">
    <a class="chip" href="#marmitas">Marmitas</a>
    <a class="chip" href="#montar">Montar prato</a>
    <a class="chip" href="#extras">Adicionais & Bebidas</a>
    <a class="chip red" href="#entrega">Entrega & Pagamento</a>
  </div>
</nav>

<div class="wrap">

  <!-- LEFT -->
  <div>

    <div class="card" id="marmitas">
      <h2>üç± Marmitas (escolha a quantidade)</h2>
      <p class="muted">
        Voc√™ pode pedir <b>as 3 op√ß√µes juntas</b>.  
        Prato do Dia e Cl√°ssico s√£o <b>fixos</b> (n√£o precisa marcar itens).
      </p>

      <div class="hr"></div>

      <!-- Dia -->
      <div class="sectionTitle">
        <div>
          <h3>üçõ Marmitex do Dia</h3>
          <div class="muted">Arroz, feij√£o, macarr√£o, batata frita, frango assado, salada (alface e tomate).</div>
        </div>
        <div class="tag">R$ 18,00</div>
      </div>

      <div class="qtyRow">
        <div class="left">
          <div class="name">Quantidade</div>
          <div class="desc">Marmitex do Dia (pronto)</div>
        </div>
        <div class="right">
          <button class="qtyBtn" onclick="qtyChange('dia', -1)">‚àí</button>
          <div class="qtyNum" id="q_dia">0</div>
          <button class="qtyBtn" onclick="qtyChange('dia', 1)">+</button>
        </div>
      </div>

      <div class="hr"></div>

      <!-- Cl√°ssico -->
      <div class="sectionTitle">
        <div>
          <h3>ü•ò Marmitex Cl√°ssico</h3>
          <div class="muted">Arroz, feij√£o, frango com quiabo, angu, couve, salada (tomate).</div>
        </div>
        <div class="tag">R$ 18,00</div>
      </div>

      <div class="qtyRow">
        <div class="left">
          <div class="name">Quantidade</div>
          <div class="desc">Marmitex Cl√°ssico (pronto)</div>
        </div>
        <div class="right">
          <button class="qtyBtn" onclick="qtyChange('classico', -1)">‚àí</button>
          <div class="qtyNum" id="q_classico">0</div>
          <button class="qtyBtn" onclick="qtyChange('classico', 1)">+</button>
        </div>
      </div>

      <div class="hr"></div>

      <!-- Montado -->
      <div class="sectionTitle">
        <div>
          <h3>üß© Montar seu prato</h3>
          <div class="muted">Escolha itens abaixo. Eles aparecem em ‚ÄúMonte seu card√°pio‚Äù para conferir.</div>
        </div>
        <div class="tag">R$ 21,00</div>
      </div>

      <div class="qtyRow">
        <div class="left">
          <div class="name">Quantidade</div>
          <div class="desc">Marmitex Montado (personalizado)</div>
        </div>
        <div class="right">
          <button class="qtyBtn" onclick="qtyChange('montado', -1)">‚àí</button>
          <div class="qtyNum" id="q_montado">0</div>
          <button class="qtyBtn" onclick="qtyChange('montado', 1)">+</button>
        </div>
      </div>

      <div class="hint">
        Obs: Itens para montar o prato s√≥ precisam ser escolhidos se a quantidade de <b>Montado</b> for maior que 0.
      </div>
    </div>

    <div style="height:16px"></div>

    <!-- Montar -->
    <div class="card" id="montar">
      <h2>‚úÖ Montar seu prato (selecione os itens)</h2>
      <p class="muted">
        Caso queira montar seu prato, clique nas op√ß√µes abaixo.  
        Voc√™ pode <b>misturar os dois card√°pios</b>. Tudo vai aparecer em <b>‚ÄúMonte seu card√°pio‚Äù</b> para voc√™ conferir.
      </p>

      <div class="hr"></div>

      <div class="card" style="padding:12px; background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.08)">
        <div class="sectionTitle">
          <h3>üçõ Op√ß√µes do Card√°pio do Dia</h3>
          <div class="tag">clique para marcar</div>
        </div>
        <div class="checklist" id="list-dia"></div>
      </div>

      <div style="height:12px"></div>

      <div class="card" style="padding:12px; background:rgba(0,0,0,.18); border:1px solid rgba(255,255,255,.08)">
        <div class="sectionTitle">
          <h3>ü•ò Op√ß√µes do Card√°pio Cl√°ssico</h3>
          <div class="tag">clique para marcar</div>
        </div>
        <div class="checklist" id="list-classico"></div>
      </div>

      <div class="field" style="margin-top:14px;">
        <label>‚úçÔ∏è Itens/ajustes do prato montado (opcional)</label>
        <textarea id="txtMontadoObs" placeholder="Ex: sem macarr√£o, pouco feij√£o, mais salada, etc..."></textarea>
        <div class="hint">Este campo √© s√≥ para o <b>prato montado</b>. Observa√ß√£o geral do pedido fica em outro campo.</div>
      </div>

      <div class="miniBox" style="margin-top:12px;">
        <h4>üßæ Monte seu card√°pio (confira aqui)</h4>
        <ul class="miniList" id="cardapioEscolhido"></ul>
        <div class="warn" style="margin-top:10px;">
          Se o item estiver correto, √© s√≥ enviar o pedido no WhatsApp (o sistema manda tudo certinho).
        </div>
      </div>
    </div>

    <div style="height:16px"></div>

    <!-- Extras -->
    <div class="card" id="extras">
      <h2>ü•© Adicionais & ü•§ Refrigerantes</h2>

      <div class="muted">Adicionais de carne: <b>+ R$ 4</b> cada (voc√™ define a quantidade).</div>

      <div class="hr"></div>

      <div class="checklist" id="list-carnes"></div>

      <div class="hr"></div>

      <div class="field">
        <label>Refrigerantes</label>
        <select id="selBebida">
          <option value="0">Nenhum</option>
          <option value="10">Coca-Cola 1L ‚Äî R$ 10</option>
          <option value="10">Fanta 1L ‚Äî R$ 10</option>
          <option value="18">Coca-Cola 2L ‚Äî R$ 18</option>
        </select>
      </div>
    </div>

    <div style="height:16px"></div>

    <!-- Entrega -->
    <div class="card" id="entrega">
      <h2>üöö Entrega ‚Ä¢ üí≥ Pagamento ‚Ä¢ üìç Dados</h2>

      <div class="hr"></div>

      <div class="field">
        <label>Entrega / Retirada</label>
        <select id="selEntrega">
          <option value="0">Retirada no local ‚Äî GR√ÅTIS</option>
          <option value="5">Entrega ‚Äî taxa fixa R$ 5,00</option>
        </select>
      </div>

      <div class="field">
        <label>Forma de pagamento</label>
        <select id="selPagamento">
          <option value="PIX">PIX</option>
          <option value="Dinheiro">Dinheiro</option>
          <option value="Cart√£o">Cart√£o</option>
        </select>
      </div>

      <div class="hr"></div>

      <div class="field">
        <label>Seu nome</label>
        <input id="inpNome" placeholder="Ex: Jo√£o Silva" />
      </div>

      <div class="field">
        <label>N√∫mero de telefone (obrigat√≥rio)</label>
        <input id="inpFone" placeholder="Ex: (31) 9xxxx-xxxx" />
      </div>

      <div class="field">
        <label>Endere√ßo completo (obrigat√≥rio)</label>
        <input id="inpEndereco" placeholder="Rua, n√∫mero, bairro, cidade" />
      </div>

      <div class="field">
        <label>Ponto de refer√™ncia (obrigat√≥rio)</label>
        <input id="inpRef" placeholder="Ex: perto da padaria / port√£o azul" />
      </div>

      <div class="field">
        <label>üìù Observa√ß√£o do pedido (geral)</label>
        <textarea id="txtPedidoObs" placeholder="Ex: sem cebola, mandar talher, chamar no port√£o, etc..."></textarea>
      </div>

      <div class="warn">
        ‚úÖ Confirme tudo antes de enviar. O pedido vai direto para o WhatsApp.  
        <br>‚è± Prazo m√©dio: <b>30 minutos</b>.
      </div>
    </div>

  </div>

  <!-- RIGHT -->
  <div class="summary">
    <div class="card">
      <h2>üí∞ Total & Resumo (estilo iFood)</h2>

      <div class="totalBox">
        <div>
          <div class="t1">Total</div>
          <div class="muted">valor base + adicionais + bebida + entrega</div>
        </div>
        <div class="t2" id="total">R$ 0,00</div>
      </div>

      <div class="hr"></div>

      <div id="lineItems"></div>

      <div class="hr"></div>

      <button class="btn btn-wa" onclick="enviarWhats()">
        Enviar pedido no WhatsApp
      </button>

      <div style="height:10px"></div>

      <button class="btn btn-ghost" onclick="limparTudo()">
        Limpar tudo
      </button>

      <div class="hint">
        Marmitex Dia: <b>R$ 18</b> ‚Ä¢ Cl√°ssico: <b>R$ 18</b> ‚Ä¢ Montado: <b>R$ 21</b> ‚Ä¢ Adicional: <b>+R$ 4</b> ‚Ä¢ Entrega: <b>+R$ 5</b>
      </div>
    </div>
  </div>

</div>

<a class="wa-float" href="#marmitas">
  üßæ <span>Fazer pedido</span> <small>agora</small>
</a>

<script>
  // ===== CONFIG =====
  const WHATSAPP_NUMBER = "5531998064556";
  const PRECO_DIA = 18;
  const PRECO_CLASSICO = 18;
  const PRECO_MONTADO = 21;
  const PRECO_CARNE_ADD = 4;

  const itensDia = [
    "Arroz",
    "Feij√£o",
    "Macarr√£o",
    "Batata frita",
    "Frango assado",
    "Salada (alface e tomate)"
  ];

  const itensClassico = [
    "Arroz",
    "Feij√£o",
    "Frango com quiabo",
    "Angu",
    "Couve",
    "Salada (tomate)"
  ];

  const carnes = [
    "Bife de boi",
    "Bife de porco",
    "Omelete"
  ];

  // ===== STATE =====
  const qty = { dia: 0, classico: 0, montado: 0 };
  const selected = new Set(); // itens do montado
  const addMeatQty = { "Bife de boi": 0, "Bife de porco": 0, "Omelete": 0 };

  // ===== HELPERS =====
  function moeda(v){ return "R$ " + v.toFixed(2).replace(".", ","); }
  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  function renderPickList(containerId, items, group){
    const el = document.getElementById(containerId);
    el.innerHTML = "";
    items.forEach((name) => {
      const key = `${group}:${name}`;
      el.innerHTML += `
        <div class="pick" id="${cssSafe(key)}" onclick="togglePick('${escapeJs(key)}')">
          <div class="name">${escapeHtml(name)}</div>
          <div class="meta">TOQUE PARA SELECIONAR</div>
        </div>
      `;
    });
  }

  function renderMeats(){
    const el = document.getElementById("list-carnes");
    el.innerHTML = "";
    carnes.forEach((name) => {
      el.innerHTML += `
        <div class="addRow">
          <div class="info">
            <div class="name">${escapeHtml(name)}</div>
            <div class="price">+ ${moeda(PRECO_CARNE_ADD)} cada</div>
          </div>
          <div class="step">
            <button class="qtyBtn" onclick="meatChange('${escapeJs(name)}', -1)">‚àí</button>
            <div class="qtyNum" id="m_${cssSafe(name)}">0</div>
            <button class="qtyBtn" onclick="meatChange('${escapeJs(name)}', 1)">+</button>
          </div>
        </div>
      `;
    });
  }

  function cssSafe(s){
    return s.replace(/[^a-zA-Z0-9\-_:.]/g, "_");
  }
  function escapeHtml(str){
    return String(str).replace(/[&<>"']/g, (m) => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }
  function escapeJs(str){
    return String(str).replace(/\\/g,"\\\\").replace(/'/g,"\\'");
  }

  // ===== INIT =====
  renderPickList("list-dia", itensDia, "dia");
  renderPickList("list-classico", itensClassico, "classico");
  renderMeats();

  // ===== QUANTITY =====
  function qtyChange(type, delta){
    qty[type] = clamp(qty[type] + delta, 0, 20);
    document.getElementById("q_" + type).innerText = qty[type];

    // se montado zerou, desmarca itens
    if(type === "montado" && qty.montado === 0){
      selected.clear();
      document.getElementById("txtMontadoObs").value = "";
      refreshPicksUI();
    }

    calc();
  }

  // ===== PICK (only meaningful if montado qty > 0) =====
  function togglePick(key){
    if(qty.montado === 0){
      alert("Para montar seu prato, primeiro aumente a quantidade de Marmitex Montado (+).");
      return;
    }

    if(selected.has(key)) selected.delete(key);
    else selected.add(key);

    refreshPicksUI();
    calc();
  }

  function refreshPicksUI(){
    // atualizar visual ativo/inativo
    const all = [...itensDia.map(x => `dia:${x}`), ...itensClassico.map(x => `classico:${x}`)];
    all.forEach((k) => {
      const el = document.getElementById(cssSafe(k));
      if(el) el.classList.toggle("active", selected.has(k));
    });

    // atualizar box "Monte seu card√°pio"
    const ul = document.getElementById("cardapioEscolhido");
    ul.innerHTML = "";

    const chosen = [...selected].map(k => k.split(":")[1]);
    if(chosen.length === 0){
      const li = document.createElement("li");
      li.textContent = "Nenhum item selecionado ainda.";
      ul.appendChild(li);
    } else {
      chosen.forEach((name) => {
        const li = document.createElement("li");
        li.textContent = name;
        ul.appendChild(li);
      });
    }
  }

  // ===== MEATS =====
  function meatChange(name, delta){
    addMeatQty[name] = clamp((addMeatQty[name] || 0) + delta, 0, 20);
    document.getElementById("m_" + cssSafe(name)).innerText = addMeatQty[name];
    calc();
  }

  // ===== CALC & SUMMARY =====
  function calc(){
    const entregaVal = Number(document.getElementById("selEntrega").value || 0);
    const bebidaVal = Number(document.getElementById("selBebida").value || 0);

    const subtotalDia = qty.dia * PRECO_DIA;
    const subtotalClassico = qty.classico * PRECO_CLASSICO;
    const subtotalMontado = qty.montado * PRECO_MONTADO;

    let meatsTotalQty = 0;
    let meatsTotal = 0;
    for(const k of Object.keys(addMeatQty)){
      meatsTotalQty += addMeatQty[k];
      meatsTotal += addMeatQty[k] * PRECO_CARNE_ADD;
    }

    const total = subtotalDia + subtotalClassico + subtotalMontado + meatsTotal + bebidaVal + entregaVal;
    document.getElementById("total").innerText = moeda(total);

    // line items estilo iFood
    const liBox = document.getElementById("lineItems");
    liBox.innerHTML = "";

    const addLine = (label, value) => {
      const div = document.createElement("div");
      div.className = "lineItem";
      div.innerHTML = `<div class="l">${label}</div><div class="r">${value}</div>`;
      liBox.appendChild(div);
    };

    if(qty.dia > 0) addLine(`üçõ Marmitex do Dia x${qty.dia}`, moeda(subtotalDia));
    if(qty.classico > 0) addLine(`ü•ò Marmitex Cl√°ssico x${qty.classico}`, moeda(subtotalClassico));
    if(qty.montado > 0) addLine(`üß© Marmitex Montado x${qty.montado}`, moeda(subtotalMontado));

    if(meatsTotalQty > 0) addLine(`ü•© Adicionais de carne (x${meatsTotalQty})`, moeda(meatsTotal));
    if(bebidaVal > 0) addLine(`ü•§ Refrigerante`, moeda(bebidaVal));
    if(entregaVal > 0) addLine(`üöö Entrega`, moeda(entregaVal));
    if(total === 0) addLine(`Nenhum item selecionado`, `‚Äî`);

    // atualizar box cardapio escolhido
    refreshPicksUI();
  }

  // ===== WHATSAPP SEND =====
  function enviarWhats(){
    const nome = document.getElementById("inpNome").value.trim();
    const fone = document.getElementById("inpFone").value.trim();
    const endereco = document.getElementById("inpEndereco").value.trim();
    const ref = document.getElementById("inpRef").value.trim();
    const pagamento = document.getElementById("selPagamento").value;
    const entregaVal = Number(document.getElementById("selEntrega").value || 0);
    const entregaTxt = (entregaVal > 0) ? "Entrega (taxa R$ 5,00)" : "Retirada no local (gr√°tis)";
    const pedidoObs = document.getElementById("txtPedidoObs").value.trim();

    if(!fone || !endereco || !ref){
      alert("Preencha: telefone, endere√ßo e ponto de refer√™ncia.");
      return;
    }

    // se montado tem qty mas sem itens, ok, mas avisa
    if(qty.montado > 0 && selected.size === 0 && !document.getElementById("txtMontadoObs").value.trim()){
      const ok = confirm("Voc√™ selecionou Marmitex Montado, mas n√£o marcou itens nem escreveu ajustes. Deseja continuar mesmo assim?");
      if(!ok) return;
    }

    // Total atual
    const totalTxt = document.getElementById("total").innerText;

    // montar mensagem
    let msg = "";
    msg += "üßæ *PEDIDO - LP GRILL*%0A";
    if(nome) msg += "üë§ Nome: " + encodeURIComponent(nome) + "%0A";
    msg += "üìû Telefone: " + encodeURIComponent(fone) + "%0A%0A";

    msg += "*üç± Marmitas*%0A";
    if(qty.dia > 0) msg += "‚Ä¢ Marmitex do Dia x" + qty.dia + " ‚Äî R$ 18,00%0A";
    if(qty.classico > 0) msg += "‚Ä¢ Marmitex Cl√°ssico x" + qty.classico + " ‚Äî R$ 18,00%0A";
    if(qty.montado > 0) msg += "‚Ä¢ Marmitex Montado x" + qty.montado + " ‚Äî R$ 21,00%0A";

    if(qty.montado > 0){
      const chosen = [...selected].map(k => k.split(":")[1]);
      msg += "%0A*‚úÖ Itens do Montado*%0A";
      msg += chosen.length ? ("‚Ä¢ " + encodeURIComponent(chosen.join(", ")) + "%0A") : "‚Ä¢ (nenhum item marcado)%0A";
      const montObs = document.getElementById("txtMontadoObs").value.trim();
      if(montObs) msg += "‚úçÔ∏è Ajustes do Montado: " + encodeURIComponent(montObs) + "%0A";
    }

    // carnes adicionais
    const meatLines = [];
    for(const k of Object.keys(addMeatQty)){
      if(addMeatQty[k] > 0) meatLines.push(`${k} x${addMeatQty[k]}`);
    }
    if(meatLines.length){
      msg += "%0A*ü•© Adicionais (+R$ 4 cada)*%0A";
      msg += "‚Ä¢ " + encodeURIComponent(meatLines.join(" | ")) + "%0A";
    }

    // bebida
    const bebidaSel = document.getElementById("selBebida");
    const bebidaVal = Number(bebidaSel.value || 0);
    if(bebidaVal > 0){
      msg += "%0A*ü•§ Refrigerante*%0A";
      msg += "‚Ä¢ " + encodeURIComponent(bebidaSel.selectedOptions[0].text) + "%0A";
    }

    msg += "%0A*üöö " + encodeURIComponent(entregaTxt) + "*%0A";
    msg += "üí≥ Pagamento: " + encodeURIComponent(pagamento) + "%0A";

    if(pedidoObs){
      msg += "%0Aüìù Observa√ß√£o do pedido: " + encodeURIComponent(pedidoObs) + "%0A";
    }

    msg += "%0Aüìç Endere√ßo: " + encodeURIComponent(endereco) + "%0A";
    msg += "üß≠ Refer√™ncia: " + encodeURIComponent(ref) + "%0A%0A";

    msg += "üí∞ *Total: " + encodeURIComponent(totalTxt) + "*%0A";
    msg += "‚è± Prazo m√©dio: 30 minutos";

    const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${msg}`;
    window.open(url, "_blank");
  }

  // ===== RESET =====
  function limparTudo(){
    qty.dia = 0; qty.classico = 0; qty.montado = 0;
    document.getElementById("q_dia").innerText = "0";
    document.getElementById("q_classico").innerText = "0";
    document.getElementById("q_montado").innerText = "0";

    selected.clear();
    document.getElementById("txtMontadoObs").value = "";

    for(const k of Object.keys(addMeatQty)){
      addMeatQty[k] = 0;
      const el = document.getElementById("m_" + cssSafe(k));
      if(el) el.innerText = "0";
    }

    document.getElementById("selBebida").value = "0";
    document.getElementById("selEntrega").value = "0";
    document.getElementById("selPagamento").value = "PIX";

    document.getElementById("inpNome").value = "";
    document.getElementById("inpFone").value = "";
    document.getElementById("inpEndereco").value = "";
    document.getElementById("inpRef").value = "";
    document.getElementById("txtPedidoObs").value = "";

    refreshPicksUI();
    calc();
    window.location.hash = "#marmitas";
  }

  // listeners
  document.getElementById("selBebida").addEventListener("change", calc);
  document.getElementById("selEntrega").addEventListener("change", calc);

  // init
  refreshPicksUI();
  calc();
</script>

</body>
</html>
